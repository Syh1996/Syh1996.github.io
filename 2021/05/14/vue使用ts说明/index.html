<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="baidu-site-verification" content="code-YfBAOEVVQH" />
    <meta name="keywords" content="邵预鸿,前端开发工程师,技术博客,生活记录,生活日常,个人简历,日常规划">
    <meta name="description" content="入职中兴通讯，一名低调资深的ctrl+c and ctrl+v开发者">
    <meta name="author" content="邵预鸿">
    
    <title>
        
            vue使用ts说明 |
        
        邵预鸿|前端开发技术笔记
    </title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="shortcut icon" href="/images/logo.jpg">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"github.com","root":"/","language":"zh-CN","path":"search.xml"};
    KEEP.theme_config = {"toc":{"enable":false,"number":false,"expand_all":false,"init_open":false},"style":{"primary_color":"#0066CC","avatar":"/images/logo.jpg","favicon":"/images/logo.jpg","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"积累硅步，可至千里；千里之行，始于足下"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"preload":true},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":false},"lazyload":{"enable":true},"version":"3.4.0"};
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 月前","year":"%s 年前"};
  </script>
<meta name="generator" content="Hexo 5.3.0"></head>


<body>
<!--
 * @Description: file content
 * @Author: yuhongshao
 * @Date: 2021-02-20 19:33:18
 * @email: yuhongshao@tencent.com
 * @LastEditTime: 2022-03-30 10:24:37
-->
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
</div>


<main class="page-container">

  

  <div class="page-main-content">

    <div class="page-main-content-top">
      <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            <a class="logo-title" href="/">
                邵预鸿|前端开发技术笔记
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                主页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                历年汇总
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                关于我
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">主页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">历年汇总</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">关于我</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


    </div>
    <style>
      .article-title-list {
        position: fixed;
        left: 80px;
        top: 110px;
        z-index: 100;
        width: 250px;
        max-height: calc(100% - 144px);
        overflow: auto;
      }

      .article-title-list h1,
      .article-title-list h2,
      .article-title-list h3,
      .article-title-list h4,
      .article-title-list h5,
      .article-title-list h6 {
        box-sizing: border-box;
        text-overflow: ellipsis;
        white-space: nowrap;
        overflow: hidden;
        color: #686868;
        font-weight: normal;
        line-height: 1;
        cursor: pointer;
      }

      .article-title-list h1 {
        font-size: 22px;
      }

      .article-title-list h2 {
        padding-left: 20px;
        font-size: 20px;
      }

      .article-title-list h3 {
        padding-left: 40px;
        font-size: 18px;
      }

      .article-title-list h4 {
        padding-left: 60px;
        font-size: 16px;
      }

      .article-title-list h5 {
        padding-left: 80px;
        font-size: 14px;
      }

      .article-title-list h6 {
        padding-left: 100px;
        font-size: 12px;
      }

    </style>
    <div class="article-title-list">
    </div>

    <div class="page-main-content-middle">

      <div class="main-content">

        
        <div class="fade-in-down-animation">
  <div class="article-content-container">

    <div class="article-title">
      <span class="title-hover-animation">vue使用ts说明</span>
    </div>

    
    <div class="article-header">
      <div class="avatar">
        <img src="/images/logo.jpg">
      </div>
      <div class="info">
        <div class="author">
          <span class="name">邵预鸿</span>
          
          <span
            class="author-label">Lv4</span>
          
        </div>
        <div class="meta-info">
          <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;2021-05-14 14:32:24
    </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/vue/">vue</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
</div>

        </div>
      </div>
    </div>
    

    <div class="article-content markdown-body">
      <p>最近项目需要将原vue项目结合ts的使用进行改造，这个后面应该是中大型项目的发展趋势，看到一篇不错的入门教程，结合它并进行了一点拓展记录之。本文从安装到vue组件编写进行了说明，适合入门。</p>
<h3 id="1、引入Typescript"><a href="#1、引入Typescript" class="headerlink" title="1、引入Typescript"></a>1、引入Typescript</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-<span class="class"><span class="keyword">class</span>-<span class="title">component</span> <span class="title">vue</span>-<span class="title">property</span>-<span class="title">decorator</span> --<span class="title">save</span></span></span><br><span class="line"><span class="class"><span class="title">npm</span> <span class="title">install</span> <span class="title">ts</span>-<span class="title">loader</span> <span class="title">typescript</span> <span class="title">tslint</span> <span class="title">tslint</span>-<span class="title">loader</span> <span class="title">tslint</span>-<span class="title">config</span>-<span class="title">standard</span> --<span class="title">save</span>-<span class="title">dev</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>vue-class-component</code>：扩展vue支持typescript，将原有的vue语法通过声明的方式来支持ts</li>
<li><code>vue-property-decorator</code>：基于vue-class-component扩展更多装饰器</li>
<li><code>ts-loader</code>：让webpack能够识别ts文件</li>
<li><code>tslint-loader</code>：tslint用来约束文件编码</li>
<li><code>tslint-config-standard</code>： tslint 配置 standard风格的约束</li>
</ul>
<h3 id="2、配置文件"><a href="#2、配置文件" class="headerlink" title="2、配置文件"></a>2、配置文件</h3><h4 id="webpack配置"><a href="#webpack配置" class="headerlink" title="webpack配置"></a>webpack配置</h4><p>根据项目的不同配置的地方不同，如果是vue cli 3.0创建的项目需要在vue.config.js中配置，如果是3.0以下版本的话，需要webpack.base.conf中配置。(以下说明是在webpack.base.conf文件中更改)</p>
<ol>
<li>在resolve.extensions中增加.ts，目的是在代码中引入ts文件不用写.ts后缀</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  extensions: [<span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.vue&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>, <span class="string">&#x27;.ts&#x27;</span>],</span><br><span class="line">  alias: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>在module.rules中增加ts的rules</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">   rules: [</span><br><span class="line">     &#123;</span><br><span class="line">       test: <span class="regexp">/\.ts$/</span>,</span><br><span class="line">       exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">       enforce: <span class="string">&#x27;pre&#x27;</span>,</span><br><span class="line">       loader: <span class="string">&#x27;tslint-loader&#x27;</span></span><br><span class="line">     &#125;,</span><br><span class="line">     &#123;</span><br><span class="line">       test: <span class="regexp">/\.tsx?$/</span>,</span><br><span class="line">       loader: <span class="string">&#x27;ts-loader&#x27;</span>,</span><br><span class="line">       exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">       options: &#123;</span><br><span class="line">         appendTsSuffixTo: [<span class="regexp">/\.vue$/</span>]</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   ]</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>tsconfig.json配置<br>ts-loader会检索文件中的tsconfig.json.以其中的规则来解析ts文件，详细的配置可以参考<a class="link"   target="_blank" rel="noopener" href="https://www.tslang.cn/docs/handbook/tsconfig-json.html" >https://www.tslang.cn/docs/handbook/tsconfig-json.html<i class="fas fa-external-link-alt"></i></a><br>贴上测试项目tsconfig.json文件</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// 编译选项</span></span><br><span class="line">  <span class="string">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="comment">// 输出目录</span></span><br><span class="line">    <span class="string">&quot;outDir&quot;</span>: <span class="string">&quot;./output&quot;</span>,</span><br><span class="line">    <span class="comment">// 是否包含可以用于 debug 的 sourceMap</span></span><br><span class="line">    <span class="string">&quot;sourceMap&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 以严格模式解析</span></span><br><span class="line">    <span class="string">&quot;strict&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// 采用的模块系统</span></span><br><span class="line">    <span class="string">&quot;module&quot;</span>: <span class="string">&quot;esnext&quot;</span>,</span><br><span class="line">    <span class="comment">// 如何处理模块</span></span><br><span class="line">    <span class="string">&quot;moduleResolution&quot;</span>: <span class="string">&quot;node&quot;</span>,</span><br><span class="line">    <span class="comment">// 编译输出目标 ES 版本</span></span><br><span class="line">    <span class="string">&quot;target&quot;</span>: <span class="string">&quot;es5&quot;</span>,</span><br><span class="line">    <span class="comment">// 允许从没有设置默认导出的模块中默认导入</span></span><br><span class="line">    <span class="string">&quot;allowSyntheticDefaultImports&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 将每个文件作为单独的模块</span></span><br><span class="line">    <span class="string">&quot;isolatedModules&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// 启用装饰器</span></span><br><span class="line">    <span class="string">&quot;experimentalDecorators&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 启用设计类型元数据（用于反射）</span></span><br><span class="line">    <span class="string">&quot;emitDecoratorMetadata&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 在表达式和声明上有隐含的any类型时报错</span></span><br><span class="line">    <span class="string">&quot;noImplicitAny&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// 不是函数的所有返回路径都有返回值时报错。</span></span><br><span class="line">    <span class="string">&quot;noImplicitReturns&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 从 tslib 导入外部帮助库: 比如__extends，__rest等</span></span><br><span class="line">    <span class="string">&quot;importHelpers&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 编译过程中打印文件名</span></span><br><span class="line">    <span class="string">&quot;listFiles&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 移除注释</span></span><br><span class="line">    <span class="string">&quot;removeComments&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;suppressImplicitAnyIndexErrors&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 允许编译javascript文件</span></span><br><span class="line">    <span class="string">&quot;allowJs&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 解析非相对模块名的基准目录</span></span><br><span class="line">    <span class="string">&quot;baseUrl&quot;</span>: <span class="string">&quot;./&quot;</span>,</span><br><span class="line">    <span class="comment">// 指定特殊模块的路径</span></span><br><span class="line">    <span class="string">&quot;paths&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;jquery&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;node_modules/jquery/dist/jquery&quot;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 编译过程中需要引入的库文件的列表</span></span><br><span class="line">    <span class="string">&quot;lib&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;dom&quot;</span>,</span><br><span class="line">      <span class="string">&quot;es2015&quot;</span>,</span><br><span class="line">      <span class="string">&quot;es2015.promise&quot;</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>tslint.json配置<br>在目录中新增tslint.json文件，由于我们前面安装了tslint-config-standard，所以可以直接用tslint-config-standard中规则，文件如下:</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;extends&quot;</span>: <span class="string">&quot;tslint-config-standard&quot;</span>,</span><br><span class="line">  <span class="string">&quot;globals&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;require&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3、让项目识别-ts"><a href="#3、让项目识别-ts" class="headerlink" title="3、让项目识别.ts"></a>3、让项目识别.ts</h3><p>由于 TypeScript 默认并不支持 *.vue 后缀的文件，所以在 vue 项目中引入的时候需要创建一个 vue-shim.d.ts 文件，放在根目录下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;*.vue&#x27;</span> &#123;</span><br><span class="line">  <span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> Vue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4、vue组件的编写"><a href="#4、vue组件的编写" class="headerlink" title="4、vue组件的编写"></a>4、vue组件的编写</h3><p>vue组件里大多数的方法改成通过@xxx（装饰器）来表明当前定义的为什么数据，类似ng中的注入。而业务逻辑js的部分就可以直接采用ts的写法了。</p>
<h4 id="基本写法"><a href="#基本写法" class="headerlink" title="基本写法"></a>基本写法</h4><p>模板<code>template</code>和样式<code>style</code>的写法不变，<code>script</code>的模块进行了改变，基本写法如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=<span class="string">&quot;ts&quot;</span>&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; Component, Vue &#125; <span class="keyword">from</span> <span class="string">&quot;vue-property-decorator&quot;</span>;</span><br><span class="line">@Component</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">Vue</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>lang=&quot;ts&quot;</code>：<code>script</code>张声明下当前的语言是<code>ts</code></li>
<li><code>@Component</code>：注明此类为一个vue组件</li>
<li><code>export default class Test extends Vue</code>： export当前组件类是继承vue的</li>
</ul>
<h4 id="data-中定义数据"><a href="#data-中定义数据" class="headerlink" title="data()中定义数据"></a>data()中定义数据</h4><p>data中的数据由原来的<code>data()</code>方法改成直接在对象中定义</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">Vue</span> </span>&#123;</span><br><span class="line"> public message1: string = <span class="string">&quot;heimayu&quot;</span>;</span><br><span class="line"> public message2: string = <span class="string">&quot;真好看&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="props传值"><a href="#props传值" class="headerlink" title="props传值"></a>props传值</h4><p>props的话就没有data那么舒服了，因为他需要使用装饰器了，写法如下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Prop()</span><br><span class="line">propA:string</span><br><span class="line"></span><br><span class="line">@Prop()</span><br><span class="line">propB:number</span><br></pre></td></tr></table></figure>
<h3 id="props默认值"><a href="#props默认值" class="headerlink" title="props默认值"></a>props默认值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Prop(&#123;</span><br><span class="line">    defualt:<span class="string">&#x27;abc&#x27;</span></span><br><span class="line">&#125;) propsA:string</span><br></pre></td></tr></table></figure>


<h4 id="emit传值"><a href="#emit传值" class="headerlink" title="$emit传值"></a>$emit传值</h4><h5 id="不带参数"><a href="#不带参数" class="headerlink" title="不带参数"></a>不带参数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 原来写法：this.$emit(&#x27;bindSend&#x27;)</span></span><br><span class="line">  <span class="comment">// 现在直接写 this.bindSend()</span></span><br><span class="line">  <span class="comment">// 多个定义</span></span><br><span class="line">  @Emit(<span class="string">&#x27;fn&#x27;</span>)</span><br><span class="line">  bindSend():string&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.message</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//等同于</span></span><br><span class="line"><span class="built_in">this</span>.$emit(<span class="string">&#x27;fn&#x27;</span>,<span class="built_in">this</span>.message);</span><br></pre></td></tr></table></figure>
<h5 id="方法带参数"><a href="#方法带参数" class="headerlink" title="方法带参数"></a>方法带参数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原来写法：this.$emit(&#x27;bindSend&#x27;, msg)</span></span><br><span class="line"><span class="comment">// 现在直接写： this.bindSend(msg)</span></span><br><span class="line"><span class="comment">// 多个下面的定义</span></span><br><span class="line">@Emit()</span><br><span class="line"><span class="function"><span class="title">bindSend</span>(<span class="params">msg:string</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// to do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="emit带参数"><a href="#emit带参数" class="headerlink" title="emit带参数"></a>emit带参数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里的test是改变组件引用的@事件名称这时候要写@test 而不是@bindSend2</span></span><br><span class="line">@Emit(<span class="string">&#x27;test)</span></span><br><span class="line"><span class="string">private bindSend2()&#123;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="watch观察数据"><a href="#watch观察数据" class="headerlink" title="watch观察数据"></a>watch观察数据</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 原来的写法 watch:&#123;&#125;</span></span><br><span class="line"></span><br><span class="line">@Watch(<span class="string">&#x27;propA&#x27;</span>,&#123;</span><br><span class="line">    deep:<span class="literal">true</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="function"><span class="title">test</span>(<span class="params">newValue:string,oldValue:string</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;propA值改变了&#x27;</span> + newValue);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="computed计算属性"><a href="#computed计算属性" class="headerlink" title="computed计算属性"></a>computed计算属性</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">get</span> <span class="title">computedMsg</span>()&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;这里是计算属性&#x27;</span> + <span class="built_in">this</span>.message;</span><br><span class="line"> &#125;</span><br><span class="line">public <span class="keyword">set</span> <span class="title">computedMsg</span>(<span class="params">message:string</span>)&#123;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="完整代码案例"><a href="#完整代码案例" class="headerlink" title="完整代码案例"></a>完整代码案例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;test-container&quot;</span>&gt;</span><br><span class="line">    &#123;&#123;message&#125;&#125;</span><br><span class="line">    &lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;点击触发父级方法&quot;</span> @click=<span class="string">&quot;bindSend&quot;</span>/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;点击触发父级方法&quot;</span> @click=<span class="string">&quot;handleSend&quot;</span>/&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;点击触发父级方法&quot;</span> @click=<span class="string">&quot;bindSend2&quot;</span>/&gt;</span><br><span class="line">    &lt;!-- <span class="xml"><span class="tag">&lt;<span class="name">Hello</span>&gt;</span><span class="tag">&lt;/<span class="name">Hello</span>&gt;</span></span> --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=<span class="string">&quot;ts&quot;</span>&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; Component, Prop, Vue, Watch, Emit &#125; <span class="keyword">from</span> <span class="string">&quot;vue-property-decorator&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Hello <span class="keyword">from</span> <span class="string">&quot;./HelloWorld.vue&quot;</span>;</span><br><span class="line"><span class="comment">// 注明此类为一个vue组件</span></span><br><span class="line">@Component(&#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Hello</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">Vue</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 原有data中的数据在这里展开编写</span></span><br><span class="line"> public message: string = <span class="string">&quot;asd&quot;</span>;</span><br><span class="line">  <span class="comment">//原有props中的数据展开编写</span></span><br><span class="line">  @Prop(&#123;</span><br><span class="line">    type: <span class="built_in">Number</span>,</span><br><span class="line">    <span class="keyword">default</span>: <span class="number">1</span>,</span><br><span class="line">    required: <span class="literal">false</span></span><br><span class="line">  &#125;)</span><br><span class="line">  propA?: number</span><br><span class="line">  @Prop()</span><br><span class="line">  propB:string</span><br><span class="line">  <span class="comment">//原有computed</span></span><br><span class="line">  public <span class="keyword">get</span> <span class="title">computedMsg</span>()&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;这里是计算属性&#x27;</span> + <span class="built_in">this</span>.message;</span><br><span class="line">  &#125;</span><br><span class="line">  public <span class="keyword">set</span> <span class="title">computedMsg</span>(<span class="params">message:string</span>)&#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//原有的watch属性</span></span><br><span class="line">  @Watch(<span class="string">&#x27;propA&#x27;</span>,&#123;</span><br><span class="line">      deep:<span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">  public <span class="function"><span class="title">test</span>(<span class="params">newValue:string,oldValue:string</span>)</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;propA值改变了&#x27;</span> + newValue);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 以前需要给父级传值的时候直接方法中使用emit就行了，当前需要通过emit来处理</span></span><br><span class="line">  @Emit()</span><br><span class="line">  private bindSend():string&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.message</span><br><span class="line">  &#125;</span><br><span class="line">  @Emit()</span><br><span class="line">  private <span class="function"><span class="title">bindSend1</span>(<span class="params">msg:string,love:string</span>)</span>&#123;</span><br><span class="line">      <span class="comment">// 如果不处理可以不写下面的，会自动将参数回传</span></span><br><span class="line">    <span class="comment">//   msg += &#x27;love&#x27;;</span></span><br><span class="line">    <span class="comment">//   return msg;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//原有放在methods中的方法平铺出来</span></span><br><span class="line">  public handleSend():<span class="keyword">void</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.bindSend1(<span class="built_in">this</span>.message,<span class="string">&#x27;love&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 这里的emit中的参数是表明父级通过什么接受，类似以前的$emit(&#x27;父级定义的方法&#x27;)</span></span><br><span class="line">  @Emit(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">  private <span class="function"><span class="title">bindSend2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&#x27;这个可以用test接受&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="vue版中的ts报错解决"><a href="#vue版中的ts报错解决" class="headerlink" title="vue版中的ts报错解决"></a>vue版中的ts报错解决</h3><h4 id="Require-statement-not-part-of-import-statement-typescript-eslint-no-var-requires"><a href="#Require-statement-not-part-of-import-statement-typescript-eslint-no-var-requires" class="headerlink" title="Require statement not part of import statement.(@typescript-eslint/no-var-requires)"></a>Require statement not part of import statement.(@typescript-eslint/no-var-requires)</h4><p>提示报错：</p>
<p>Require statement not part of import statement.(@typescript-eslint/no-var-requires)<br>解决办法：</p>
<p>.eslintrc.js中的 rules 属性新增以下内容：</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rules: &#123;</span><br><span class="line">    <span class="string">&#x27;@typescript-eslint/no-var-requires&#x27;</span>: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4 id="vue报错Unexpected-aliasing-of-‘this‘-to-local-variable-typescript-eslint-no-this-alias"><a href="#vue报错Unexpected-aliasing-of-‘this‘-to-local-variable-typescript-eslint-no-this-alias" class="headerlink" title="vue报错Unexpected aliasing of ‘this‘ to local variable @typescript-eslint/no-this-alias"></a>vue报错Unexpected aliasing of ‘this‘ to local variable @typescript-eslint/no-this-alias</h4><p>因是在vue中使用_this = this,总是报错Unexpected aliasing of ‘this’ to local variable @typescript-eslint/no-this-alias</p>
<p>原因是 eslint 为了防止this变量和局部变量混淆（大概吧）</p>
<p>解决方法：在.eslintrc.js中的rules添加   “@typescript-eslint/no-this-alias”: [“off”]</p>

    </div>
    <h3 style="font-size: 1.6rem;font-weight: 550;">页面关键信息已通过以下代码生成跳转链接</h3>
    <pre>
     &lt;script&gt;
         const context = document.querySelector(".markdown-body");
         const articleTitleList = document.querySelector(".article-title-list");
         if(context){
             const tags = context.querySelectorAll('*');
             const hTagReg = /^H[1-6]$/;
             let template = '';
             tags.forEach(item=>{
                     if(hTagReg.test(item.tagName.toUpperCase()) && item.innerText){
                      const tagH = item.tagName.toLowerCase();
                      const forHash = item.getAttribute("id");
                     template+=`
                          <${tagH}>
                          <a onclick="javascript:void(1)" href="#${forHash}">${item.innerText}</a>
                         </${tagH}>  
                      `;
                  }
              });
             articleTitleList.innerHTML=template; 
          }
          &lt;/script&gt;
        </pre>
    
    <div class="post-copyright-info">
      <div class="article-copyright-info-container">
    <ul>
        <li>本文标题：vue使用ts说明</li>
        <li>本文作者：邵预鸿</li>
        <li>创建时间：2021-05-14 14:32:24</li>
        <li>
            本文链接：/images/logo.jpg2021/05/14/vue使用ts说明/
        </li>
        <li>
            版权声明：本博客所有文章除特别声明外，均采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> 许可协议。转载请注明出处！
        </li>
    </ul>
</div>

    </div>
    

    
    <div class="article-nav">
      
      <div class="article-prev">
        <a class="prev" rel="prev" href="/2021/05/17/%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84css/">
          <span class="left arrow-icon flex-center">
            <i class="fas fa-chevron-left"></i>
          </span>
          <span class="title flex-center">
            <span class="post-nav-title-item">你不知道的css</span>
            <span class="post-nav-item">上一篇</span>
          </span>
        </a>
      </div>
      
      
      <div class="article-next">
        <a class="next" rel="next" href="/2021/03/12/node%E9%82%A3%E7%82%B9%E4%BA%8B/">
          <span class="title flex-center">
            <span class="post-nav-title-item">node那点事</span>
            <span class="post-nav-item">下一篇</span>
          </span>
          <span class="right arrow-icon flex-center">
            <i class="fas fa-chevron-right"></i>
          </span>
        </a>
      </div>
      
    </div>
    

    
  </div>
</div>


        
      </div>

    </div>

    <div class="page-main-content-bottom">
      <!--
 * @Description: file content
 * @Author: yuhongshao
 * @Date: 2022-04-11 16:32:40
 * @email: yuhongshao@tencent.com
 * @LastEditTime: 2022-04-25 09:25:59
-->
<footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2021</span>&nbsp;-&nbsp;
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">邵预鸿</a>
        </div>
        
        
        <div>更多笔记请访问:<a href="https://www.shaoyuhong.cn" target="_blank">邵预鸿|随心记 https://www.shaoyuhong.cn</a></div>
        <div><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn">渝ICP备17015283号-3</a></div>
    </div>
</footer>

    </div>
  </div>

  
  <div class="post-tools">
    <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        

        <!-- go comment -->
        
    </ul>
</div>

  </div>
  

  <div class="right-bottom-side-tools">
    <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

  </div>

  

  <div class="image-viewer-container">
    <img src="">
</div>


  
  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

  

</main>
<script>
  const context = document.querySelector(".markdown-body");
  const articleTitleList = document.querySelector(".article-title-list");
  const mainContent = document.querySelector('.main-content');

  if (context) {
    const tags = context.querySelectorAll('*');
    const hTagReg = /^H[1-6]$/;
    let template = '';
    tags.forEach(item => {
      if (hTagReg.test(item.tagName.toUpperCase()) && item.innerText) {
        const tagH = item.tagName.toLowerCase();
        const forHash = item.getAttribute("id");
        template += `
                  <${tagH}>
                    <a onclick="javascript:void(1)" href="#${forHash}">${item.innerText}</a>
                  </${tagH}>  
                `;

      }
    });
    articleTitleList.innerHTML = template;

  }

  (function leftNavPositionChange() {
    const articleTitlePositoinX = (window.innerWidth - mainContent.clientWidth) / 2 - 255;
    articleTitleList.style.left = articleTitlePositoinX + 'px';
    window.onresize = function () {
      leftNavPositionChange();
    };
  })();

</script>

<script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/header-shrink.js"></script><script src="/js/back2top.js"></script><script src="/js/dark-light-toggle.js"></script>


    <script src="/js/local-search.js"></script>



    <script src="/js/code-copy.js"></script>



    <script src="/js/lazyload.js"></script>


<div class="post-scripts">
    
</div>



</body>
</html>
